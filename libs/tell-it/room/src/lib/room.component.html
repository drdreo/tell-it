<div class="page-container">
    @if (offline()) {
        <tell-it-connection-status [status]="'offline'" (reconnect)="reconnect()" />
    } @else if (connectionState().status !== "connected") {
        <tell-it-connection-status
            [status]="connectionState().status"
            [attemptNumber]="connectionState().attemptNumber"
            (reconnect)="reconnect()" />
    }

    @switch (gameStatus()) {
        @case ("waiting") {
            <tell-it-waiting-room
                [roomName]="roomName()"
                [users]="users()"
                [user]="currentPlayer()"
                (startGame)="startGame()">
            </tell-it-waiting-room>
        }
        @case ("started") {
            <tell-it-game-in-progress
                [users]="users()"
                [user]="currentPlayer()"
                [story]="story()"
                [turnTimer]="turnTime()"
                [finishVotes]="finishVotes()"
                (submitText)="submitText($event)"
                (voteFinish)="voteFinish()">
            </tell-it-game-in-progress>
        }
        @case ("ended") {
            <tell-it-game-ended
                [finalStories]="finalStories()"
                (restart)="restart()"
                (loadFinalStories)="loadFinalStories()">
            </tell-it-game-ended>
        }
    }
</div>

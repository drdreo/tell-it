<div class="game-container">
    <div class="responsive-container">
        <div class="game-header">
            <div class="turn-timer">
                @if (turnTimer()) {
                    <ng-icon name="bootstrapStopwatch" />
                    {{ turnTimer() }}
                }
            </div>
            @let _finishVotes = finishVotes();
            <div class="finish-votes" [class.has-votes]="_finishVotes && _finishVotes.length > 0">
                @if (_finishVotes && _finishVotes.length > 0) {
                    <ng-icon name="bootstrapCheck" />
                    Finish: {{ _finishVotes.length }}/{{ users()?.length }}
                }
            </div>
        </div>

        <div class="story-queue-section">
            <div class="story-queue-label">Pending stories:</div>
            <tell-it-app-user-list [users]="users()" [user]="user()" [showQueue]="true" />
        </div>

        <div class="story-content">
            @let _story = story();
            @if (_story) {
                <tell-it-app-story [story]="_story" />
            } @else if (user()) {
                <div class="waiting-message">Waiting for a story...</div>
            } @else {
                <div class="waiting-message">You are a spectator. TBD</div>
            }
        </div>

        <div class="input-section">
            <textarea
                #storyInput
                class="input story-textarea"
                (input)="onInputChange(storyInput.value)"
                placeholder="Continue the story in your way..."></textarea>

            <div class="actions">
                <button class="button submit-btn" [disabled]="submitDisabled()" (click)="onSubmit(storyInput)">
                    <ng-icon name="bootstrapSend" />
                    Submit
                </button>
                <button class="button warning" (click)="voteFinish.emit()">
                    <ng-icon name="bootstrapCheck" />
                    Finish
                </button>
            </div>
        </div>
    </div>
</div>

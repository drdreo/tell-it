<div class="game-container">
    <div class="responsive-container">
        @if (turnTimer()) {
            <div class="turn-timer">
                {{ turnTimer() }}
                <ng-icon name="bootstrapStopwatch" />
            </div>
        }
        <ul class="story-queue-list">
            Pending stories:
            @for (_user of users(); track _user.id) {
                <li>
                    @if (_user.disconnected) {
                        <ng-icon name="bootstrapExclamationTriangle" title="Disconnected" />
                    }
                    <span [class.username]="_user.id === user()?.id">{{ _user.name }}</span> - {{ _user.queuedStories }}
                </li>
            }
        </ul>
        @let _finishVotes = finishVotes();
        @if (_finishVotes && _finishVotes.length > 0) {
            <div class="finish-votes">Finish: {{ _finishVotes.length }}/{{ users()?.length }}</div>
        }
        @let _story = story();
        @if (_story) {
            <tell-it-app-message [author]="_story.author" [message]="_story.text"></tell-it-app-message>
        } @else if (user()) {
            Waiting for a story...
        } @else {
            You are a spectator. TBD
        }

        <textarea
            #storyInput
            class="input story-textarea"
            (input)="onInputChange(storyInput.value)"
            placeholder="Continue the story in your way..."></textarea>

        <div class="actions">
            <button class="button submit-btn" [disabled]="submitDisabled()" (click)="onSubmit(storyInput)">
                <ng-icon name="bootstrapSend" />
                Submit
            </button>
            <button class="button warning" (click)="voteFinish.emit()">
                <ng-icon name="bootstrapCheck" />
                Finish
            </button>
        </div>
    </div>
</div>
